<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Web Project</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	

</head>
<body>

	<!--Topbar elements-->
	<div id="topBar">

		<div id="buttons_container">
			<div class="buttons" id="button1">
			</div>
			<div class="buttons" id="button2"></div>
			<div class="buttons" id="button3"></div>
			
		</div>

		<div id="logo">
			<img src="/images/firelogo.png" alt="Logo" id="logoImg">
		</div>

		<nav id="navBar">
			<ul>
				<li>
					<a href="../Index.html" onclick="frontPage()"><i class="fa fa-home"></i></a>
				</li>
				<li class="navSymbols">
					<a href="index.html"><i class="fa fa-cog"></i></a>
				</li>
				<li class="navSymbols">
					<a href="index.html"><i class="fa fa-eye"></i></a>
				</li>
			</ul>
		</nav>
	</div>

<!--Overview of projects (Project tabs on left side)-->
<div id="left_container">

	<div id="task_container">
		<div id="task_box1" class="task_boxes">
			<h2>HTML</h2>
		</div>
	</div>
	
	
	<div id="add_container">
		<img src="../images/plus_icon.png" id="plus_icon" alt="plus">
	</div>

	<div id="miniContainer">
		<div id="miniTaskBox" class="miniBox"></div>

		
	</div>

	<div id="miniAdd">
		<img src="../images/plus_icon.png" id="miniPlus_icon" alt="plus">
	</div>
	
</div>


<!--Hovedinnhold (Task info, Descriotions, etc...)-->
<div id="main_container">

	<h2 id="mainTitle">HTML</h2>

	<div class="toggle-btn" onclick="toggleSidebar()"></div>

	<!--Task container with name, dropPerson, minipiechart and add button-->
	<div id="taskContainer">

		<div class=taskTabs id="taskTab">
            <div class="overskrift" id="overskrift">overskrift</div>
			<div class="plus" onclick="expandTask()" id="test"></div>
            <div class="addTask" id="addtask" style="width: 20px; height: 20px; right: -200px; position: relative; background-color: antiquewhite">addtask</div>
            <div class="listoftasks" id="listoftasks">
            <div class="task" id="task0" style="background-color: beige; position: relative;">her kommer det diverse tasks. de blir generert etter localstorage.</div>
            </div>
			<div class="miniChart" id="miniChart1"></div>
            <div id="addTasks" style="position: relative; bottom: -150px;">
            <input type="text" id="textbox" value="to add tasks">
                <input type="button" id="addTask" value="O"><br>
                <input type="date" id="date">
            </div>
			<div class="dropPerson" id="dropPerson1" ondrop="drop(event)" ondragover="allowDrop(event)">Drop person here</div>
		</div>
	</div>

	<!--Workprogress of tasks-->
	<div id="piechart"></div>


	<!--Shows how many people are in the project-->
	<div id="personList">

		<div class="person">
			<img src="" alt="P" id="personId" draggable="true" ondragstart="drag(event)">	
		</div>

		<div id="addPerson">
			<img src="../images/plus_icon.png" alt="Pluss" id="addPluss">
		</div>
	</div>

	<!--Information about task-->
	<div id="descriptionBox"></div>

	</div>

	<!--Trash-->
	<div id=trash_container>
		<img src="../images/Garbage.png" id="trash" alt="Trash">

	</div>
	
</body>
    <script>
        var getLeftContainer = document.getElementById("task_container");
        var getAddContainer = document.getElementById("add_container");
        var getAddPerson = document.getElementById("addPerson");
        var getPersonList = document.getElementById("personList")
        var getTaskarea = document.getElementById("listoftasks")
        var getAddTask = document.getElementById("addTask");
    //  var getAddMainTask = document.getElementById("");
        var getTextbox = document.getElementById("textbox");
        var getDate = document.getElementById("date");
        var categoryArray = [];
        var mainTasksArray= [];
        var taskArray = [];
        var personArray=[];
        buildItems("category");
        
        getAddContainer.onclick = onclickAddCategory;
        getAddPerson.onclick = onclickAddPerson;
        getAddTask.onclick= onclickAddTask;
        
        
        function onclickAddCategory(){
            categoryArray.push({textToShow: "CSS", backgroundcolor: "#28cc6d"});
            setLocalStorage(`category`, categoryArray);
            buildItems("category");
        }
        
        function onclickAddPerson(){
            personArray.push({textToShow: "G", backgroundcolor: "#28cc6d"});
            setLocalStorage(`person`, personArray);
        }
        
        function onclickAddTask(){
            let text = getTextbox.value;
            let date = getDate.value;
            taskArray.push({textToShow: `${text}`, backgroundcolor: "#28cc6d", date:`${date}`});
            setLocalStorage(`task`, taskArray);
            buildItems("task");
        }
        
        function buildItems(type){
            if(type=="category"){
        getLeftContainer.innerHTML = "";
        categoryArray = getLocalStorage(`category`);
        for (var i = 0; i < categoryArray.length; i++) {
          let backgroundColor = categoryArray[i].backgroundcolor;
          let text = categoryArray[i].textToShow;
          getLeftContainer.innerHTML += `<div class="card" style="--background:${backgroundColor}; --text:white;">
        <div class="multi-button">
        <button class="fa fa-comment"></button>
        <button class="fa fa-cog"></button>
        <button class="fa fa-trash" id="trash" onclick="removeItem('${categoryArray[i].textToShow}')"></button>
        </div>
        <div class="container">${text}</div>
        </div>`;
        }


      }
            if(type==="person"){
                getPersonList.innerHTML=``;
                personArray = getLocalStorage(`person`);
                for(var i=0; i<personArray.length; i++){
                    let backgroundPerson = personArray[i].backgroundcolor;
                    let textPerson = personArray[i].textToShow;
                    getPersonList.innerHTML += `<div class="person">
			<img src="" alt="${textPerson}" id="personId" draggable="true" ondragstart="drag(event)">	
		</div>`
                }
                getPersonList.innerHTML += `<div id="addPerson">
			<img src="../images/plus_icon.png" alt="Pluss" id="addPluss">
		</div>`
            }
            
            if(type==="task"){
                getTaskarea.innerHTML = ``;
                taskArray = getLocalStorage(`task`);
                for(var i=0; i<taskArray.length; i++){
                    let backgroundText = taskArray[i].backgroundcolor;
                    let textTask = taskArray[i].textToShow;
                    getTaskarea.innerHTML +=`<div class="task" id="{textTask}" style="background-color: beige; position: relative; width: 250px">${textTask}</div>
            </div>`
                }
                
            }
            getAddPerson.onclick = onclickAddPerson;
            }
        
        
        function setLocalStorage(type, object) {
        window.localStorage.setItem(type, JSON.stringify(object));
      }

      function getLocalStorage(type) {
        return JSON.parse(window.localStorage.getItem(type)) || [];
      }
        
    </script>
<script src="../scripts/pieChart.js"></script>
<script src="../scripts/toggleSidebar.js"></script>
<script src="../scripts/newPage.js"></script>
<script src="../scripts/localStorageHandler.js"></script>
</html>